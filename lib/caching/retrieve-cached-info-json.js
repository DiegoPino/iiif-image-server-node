// Generated by CoffeeScript 1.10.0
(function() {
  var fs, info_cache, info_json_path, log, retrieve_cached_info_json;

  fs = require('fs');

  info_cache = require('../index').info_cache;

  info_json_path = require('../info-json-path');

  log = require('../index').log;

  retrieve_cached_info_json = function(id, callback) {
    if (info_cache.get(id)) {
      log.info("info.json from memory");
      return callback(info_cache.get(id));
    } else {
      return fs.readFile(info_json_path(id), function(err, data) {
        if (err) {
          log.info('info.json not in file');
          return callback(null);
        } else {
          log.info('info.json from file');
          return callback(JSON.parse(data));
        }
      });
    }
  };

  module.exports = retrieve_cached_info_json;

}).call(this);
